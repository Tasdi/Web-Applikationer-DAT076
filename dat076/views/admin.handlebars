<!DOCTYPE html>
<html>
    <head>
        <title>{{title}}</title>

        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        
        <script src="../../dist/js/bootstrap.min.js"></script>
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>
        <script>
            $( function() {
            $( "#datepicker" ).datepicker();
            } );
        </script>
        <script>
            $( function() {
                $( "#startTime" ).timepicker();
            } );
        </script>
        <script>
            $( function() {
                $( "#endTime" ).timepicker();
            } );
        </script>
    </head>

    <body>
        <h1> Hello Dr. {{user.name}}</h1>
        <hr></hr>
        {{#if errors}}
            {{#each errors}}
            <div class="alert alert-danger">{{msg}}</div>
            {{/each}}
        {{/if}}
        <hr></hr>    

        <div>
            <form method="post" action="/showBookings">
            <button typpe="button" class="adminButton">Show bookings </button>
            </form>
            <div id="bookingInfo">
                <ul  border="1" cellpadding="10" cellspacing="10" id="bookingTable">
                    {{# each booking }}
                        <hr></hr>
                        <ul>
                            <form method="POST" action="/updateTable">
                                <input type="text" class="form-control:focus" name="date" value="{{this.date}}" >
                                <input type="text" class="form-control:focus" name="startTime" value="{{this.startTime}}">
                                <input type="text" class="form-control:focus" name="endTime" value="{{this.endTime}}">
                                <input value={{ this.isBooked }}>
                                <input type="hidden" name="id" value={{this.id}}>
                                <input type="submit" value="update">
                            </form>
                    </ul>   
                    {{/each}}
                </ul>
            </div>
            <hr></hr>
        </div>

        <div>
            <form method="post" action="/createBooking">
                <button type="button" class="adminButton1" onclick="toggle()">Create a new booking</button>
                <div id="createSchema" style="display:none">

                    <div class="form-group">
                        <label>Date</label><br>
                        <input type="text" class="form-control:focus" placeholder="Date" name="datepicker" id="datepicker">
                    </div>

                    <div class="form-group">
                        <label>Start time</label><br>
                        <input type="text" class="form-control:focus" placeholder="startTime" name="startTime" id="startTime">
                    </div>

                    <div class="form-group">
                        <label>End time</label><br>
                        <input type="text" class="form-control:focus" placeholder="endTime" name="endTime" id="endTime">
                    </div>

                    <p>
                        <button type="submit" class="btn btn-default">Submit</button>
                    </p>

                </div>
                <hr></hr>
            </form>
        </div>

        <div>
            <form method="post" action="/showPatients">
            <button typpe="button" class="adminButton">Show all patients</button>
            <div id="patientInfo">
                <table  border="1" cellpadding="10" cellspacing="10">
                    <tr>
                        <th>Name</th> <th>Email</th>
                    </tr>
                    {{# each patient }}
                    <tr>
                        <td> {{ this.name }}</td>
                        <td>{{ this.email }}</td>
                    </tr>
                    {{/each}}
                </table>
            </div>
            </form>
            <hr></hr>
        </div>
    </body>
    
<script>
function toggle() { 
    var toggle = document.getElementById('createSchema');
    if (toggle.style.display == 'none') {
        toggle.style.display = 'block'; 
    } else {
        toggle.style.display = 'none';    
    }
}
</script>

</html>